<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Knowledge Base</title>
    <link rel="stylesheet" href="/static/css/pico.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <main class="container">
        <header id="app-header" style="display: none;">
            <nav>
                <ul>
                    <li><strong>AI Knowledge Base</strong></li>
                </ul>
                <ul>
                    <li><a href="#" id="profile-link">Профиль</a></li>
                    <li><a href="#" id="admin-link" style="display: none;">Админка</a></li>
                    <li><a href="#" id="logout-button" role="button" class="secondary">Выйти</a></li>
                </ul>
            </nav>
            <hr>
        </header>

        <section id="login-view">
            <h1>Вход</h1>
            <form id="login-form">
                <label for="username">Имя пользователя</label>
                <input type="text" id="username" name="username" placeholder="Имя пользователя" required>
                <label for="password">Пароль</label>
                <input type="password" id="password" name="password" placeholder="Пароль" required>
                <button type="submit">Войти</button>
                <p id="login-error" class="error-message" style="display: none;"></p>
            </form>
        </section>

        <section id="app-view" style="display: none;">

            <article id="chat-area">
                <h2>Чат</h2>
                <div id="chat-history" class="chat-history">
                    </div>
                <form id="chat-form">
                     <input type="text" id="chat-input" placeholder="Введите ваш вопрос..." required>
                     <button type="submit">Отправить</button>
                     <button type="button" id="new-chat-button" class="secondary outline">Новый чат</button>
                     </form>
                 <p id="chat-error" class="error-message" style="display: none;"></p>
            </article>

            <article id="upload-area">
                <h2>Загрузка документов</h2>
                <form id="upload-form">
                    <label for="file">Выберите файл</label>
                    <input type="file" id="file" name="file" required>
                    <button type="submit">Загрузить</button>
                    <progress id="upload-progress" max="100" value="0" style="display: none;"></progress>
                    <p id="upload-status"></p>
                </form>
                 <p id="upload-error" class="error-message" style="display: none;"></p>
            </article>

        </section>

        <section id="profile-view" style="display: none;">
            <h2>Профиль пользователя</h2>
            <form id="profile-form">
                <label for="profile-username">Имя пользователя</label>
                <input type="text" id="profile-username" name="username" readonly disabled>

                <label for="profile-full-name">Полное имя</label>
                <input type="text" id="profile-full-name" name="full_name">

                <label for="profile-birth-date">Дата рождения</label>
                <input type="date" id="profile-birth-date" name="birth_date">

                <label for="profile-password">Новый пароль (оставьте пустым, если не меняете)</label>
                <input type="password" id="profile-password" name="password">

                <button type="submit">Сохранить изменения</button>
            </form>
            <button id="back-to-chat-button" class="secondary outline">Назад к чату</button>
            <p id="profile-message" style="display: none;"></p>
            <p id="profile-error" class="error-message" style="display: none;"></p>
        </section>

        <section id="admin-view" style="display: none;">
             <h2>Панель администратора</h2>
             <button id="back-to-chat-from-admin-button" class="secondary outline">Назад к чату</button>

             <article>
                <h3>Регистрация нового пользователя</h3>
                <form id="register-form">
                    <input type="text" name="username" placeholder="Имя пользователя" required>
                    <input type="password" name="password" placeholder="Пароль" required>
                    <input type="text" name="full_name" placeholder="Полное имя">
                    <input type="date" name="birth_date">
                     <label>
                        <input type="checkbox" name="is_admin">
                        Администратор?
                    </label>
                    <button type="submit">Зарегистрировать</button>
                    <p id="register-message" style="display: none;"></p>
                    <p id="register-error" class="error-message" style="display: none;"></p>
                </form>
            </article>

             <article>
                <h3>Список пользователей</h3>
                <table id="user-list-table" role="grid">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Имя пользователя</th>
                            <th>Полное имя</th>
                            <th>Админ</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="user-list-body">
                        </tbody>
                </table>
                <p id="admin-error" class="error-message" style="display: none;"></p>
            </article>
        </section>

    </main>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/chat.js"></script>
    <script src="/static/js/profile.js"></script>
    <script src="/static/js/admin.js"></script>
    <script src="/static/js/main.js"></script>
</body>
</html>